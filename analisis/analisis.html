<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Análisis con IA - AsisteQR</title>
  <link rel="stylesheet" href="analisis.css">
</head>
<body>
  <nav class="navbar">
    <div class="nav-content">
      <div class="logo">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
          <rect width="32" height="32" rx="8" fill="url(#gradient)"/>
          <path d="M8 8h4v4h-4zm6 0h4v4h-4zm6 0h4v4h-4zm-12 6h4v4h-4zm6 0h4v4h-4zm6 0h4v4h-4zm-12 6h4v4h-4zm6 0h4v4h-4zm6 0h4v4h-4z" fill="white"/>
          <defs>
            <linearGradient id="gradient" x1="0" y1="0" x2="32" y2="32">
              <stop offset="0%" stop-color="#0078D4"/>
              <stop offset="100%" stop-color="#00A4EF"/>
            </linearGradient>
          </defs>
        </svg>
        <span>AsisteQR</span>
      </div>
      <div class="nav-menu">
        <a href="../qr/escaner.html" class="nav-item">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <rect x="4" y="4" width="12" height="12" stroke="currentColor" stroke-width="2" fill="none"/>
            <rect x="6" y="6" width="2" height="2" fill="currentColor"/>
            <rect x="12" y="6" width="2" height="2" fill="currentColor"/>
          </svg>
          Escáner
        </a>
        <a href="../eventos/eventos.html" class="nav-item">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <rect x="4" y="5" width="12" height="12" rx="2" stroke="currentColor" stroke-width="2" fill="none"/>
            <path d="M7 3v4M13 3v4M4 9h12" stroke="currentColor" stroke-width="2"/>
          </svg>
          Eventos
        </a>
        <a href="../registro/registro.html" class="nav-item">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <circle cx="10" cy="8" r="3" stroke="currentColor" stroke-width="2" fill="none"/>
            <path d="M4 17c0-3 2.5-5 6-5s6 2 6 5" stroke="currentColor" stroke-width="2"/>
          </svg>
          Registro
        </a>
        <a href="../reportes/reportes.html" class="nav-item">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M4 16V8l4-4 4 4v8M4 12h8" stroke="currentColor" stroke-width="2"/>
          </svg>
          Reportes
        </a>
        <a href="analisis.html" class="nav-item active">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <circle cx="10" cy="10" r="7" stroke="currentColor" stroke-width="2" fill="none"/>
            <path d="M10 7v3l2 2" stroke="currentColor" stroke-width="2"/>
          </svg>
          Análisis IA
        </a>
      </div>
    </div>
  </nav>

  <main class="main-content">
    <div class="container">
      <div class="page-header">
        <div class="header-content">
          <div class="ai-badge">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M12 2l2 7h7l-5.5 4 2 7L12 16l-5.5 4 2-7L3 9h7l2-7z" fill="url(#aiGradient)"/>
              <defs>
                <linearGradient id="aiGradient" x1="0" y1="0" x2="24" y2="24">
                  <stop offset="0%" stop-color="#8B5CF6"/>
                  <stop offset="100%" stop-color="#A78BFA"/>
                </linearGradient>
              </defs>
            </svg>
            <span>Impulsado por IA</span>
          </div>
          <h1 class="page-title">Análisis Inteligente de Asistencias</h1>
          <p class="page-subtitle">Insights avanzados y predicciones basadas en machine learning</p>
        </div>
        <div class="header-actions">
          <select class="filter-select" id="event-filter">
            <option value="">Todos los eventos</option>
          </select>
          <button class="btn-primary" id="btn-generate-analysis">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M10 4v12M4 10h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="2" fill="none"/>
            </svg>
            Generar Análisis
          </button>
        </div>
      </div>

      <!-- AI Processing Indicator -->
      <div class="ai-processing" id="ai-processing">
        <div class="processing-content">
          <div class="ai-loader">
            <div class="brain-icon">
              <svg width="80" height="80" viewBox="0 0 80 80" fill="none">
                <path d="M40 10c-16.569 0-30 13.431-30 30 0 16.569 13.431 30 30 30 16.569 0 30-13.431 30-30 0-16.569-13.431-30-30-30z" stroke="url(#brainGradient)" stroke-width="3" fill="none"/>
                <circle cx="30" cy="35" r="4" fill="#8B5CF6"/>
                <circle cx="50" cy="35" r="4" fill="#8B5CF6"/>
                <circle cx="40" cy="50" r="5" fill="#A78BFA"/>
                <path d="M30 35c0 6 4 10 10 10s10-4 10-10" stroke="#8B5CF6" stroke-width="2" fill="none"/>
                <defs>
                  <linearGradient id="brainGradient" x1="0" y1="0" x2="80" y2="80">
                    <stop offset="0%" stop-color="#8B5CF6"/>
                    <stop offset="100%" stop-color="#A78BFA"/>
                  </linearGradient>
                </defs>
              </svg>
            </div>
            <h3>Analizando Datos con IA...</h3>
            <p id="processing-status">Inicializando modelos de machine learning</p>
            <div class="progress-bar">
              <div class="progress-fill" id="progress-fill"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Analysis Results -->
      <div class="analysis-results" id="analysis-results">
        <div class="insights-grid">
          <!-- Executive Summary -->
          <div class="card insight-card executive-summary">
            <div class="card-icon" style="background: linear-gradient(135deg, #8B5CF6 0%, #A78BFA 100%);">
              <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                <path d="M8 20l6-8 4 4 6-8" stroke="white" stroke-width="3" stroke-linecap="round"/>
                <circle cx="8" cy="20" r="2" fill="white"/>
                <circle cx="14" cy="12" r="2" fill="white"/>
                <circle cx="18" cy="16" r="2" fill="white"/>
                <circle cx="24" cy="8" r="2" fill="white"/>
              </svg>
            </div>
            <h3>Resumen Ejecutivo</h3>
            <div class="summary-content" id="executive-summary"></div>
          </div>

          <!-- Attendance Trends -->
          <div class="card insight-card">
            <div class="card-icon" style="background: linear-gradient(135deg, #0078D4 0%, #00A4EF 100%);">
              <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                <path d="M4 24V12l8-6 8 6v12" stroke="white" stroke-width="2" fill="none"/>
                <path d="M4 18h16" stroke="white" stroke-width="2"/>
              </svg>
            </div>
            <h3>Tendencias de Asistencia</h3>
            <div class="chart-container">
              <canvas id="trends-chart"></canvas>
            </div>
            <div class="trend-insights" id="trend-insights"></div>
          </div>

          <!-- Peak Times -->
          <div class="card insight-card">
            <div class="card-icon" style="background: linear-gradient(135deg, #00B294 0%, #00D4A0 100%);">
              <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                <circle cx="16" cy="16" r="12" stroke="white" stroke-width="2" fill="none"/>
                <path d="M16 8v8l6 4" stroke="white" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </div>
            <h3>Horarios Pico</h3>
            <div class="peak-times-grid" id="peak-times"></div>
          </div>

          <!-- Student Engagement -->
          <div class="card insight-card">
            <div class="card-icon" style="background: linear-gradient(135deg, #F7630C 0%, #FBBF24 100%);">
              <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                <circle cx="12" cy="12" r="5" stroke="white" stroke-width="2" fill="none"/>
                <circle cx="22" cy="16" r="4" stroke="white" stroke-width="2" fill="none"/>
                <circle cx="10" cy="22" r="4" stroke="white" stroke-width="2" fill="none"/>
              </svg>
            </div>
            <h3>Compromiso Estudiantil</h3>
            <div class="engagement-metrics" id="engagement-metrics"></div>
          </div>

          <!-- Predictions -->
          <div class="card insight-card prediction-card">
            <div class="card-icon" style="background: linear-gradient(135deg, #8B5CF6 0%, #A78BFA 100%);">
              <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                <path d="M6 20c0-8 4-14 10-14s10 6 10 14" stroke="white" stroke-width="2" fill="none"/>
                <circle cx="16" cy="26" r="3" fill="white"/>
                <path d="M16 26V14" stroke="white" stroke-width="2"/>
              </svg>
            </div>
            <h3>Predicciones y Recomendaciones</h3>
            <div class="predictions-content" id="predictions"></div>
          </div>

          <!-- Location Analysis -->
          <div class="card insight-card">
            <div class="card-icon" style="background: linear-gradient(135deg, #00B294 0%, #00D4A0 100%);">
              <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                <circle cx="16" cy="16" r="12" stroke="white" stroke-width="2" fill="none"/>
                <circle cx="16" cy="16" r="2" fill="white"/>
                <path d="M16 4v4M16 24v4M4 16h4M24 16h4" stroke="white" stroke-width="2"/>
              </svg>
            </div>
            <h3>Análisis Geográfico</h3>
            <div class="location-insights" id="location-insights"></div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script src="../config.js"></script>
  <script src="../datos-prueba.js"></script>
  <script src="analisis.js"></script>
</body>
</html>
